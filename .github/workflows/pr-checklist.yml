name: PR Checklist for Frontend

on:
  pull_request:
    branches: [main]
    types: [opened, reopened, edited, review_requested, synchronize]

jobs:
  check:
    name: Add Checklist to PR
    runs-on: ubuntu-latest  # Using Ubuntu as specified

    steps:
      - name: Add checklist if PR is opened or updated
        uses: actions/github-script@v7
        with:
          script: |
            console.log("Workflow started...");

            const pr = context.payload.pull_request;
            if (!pr) {
              console.log("No PR context found.");
              return;
            }

            console.log(`PR found: #${pr.number}, Title: "${pr.title}"`);

            const checklist = `
            ## ✅ PR Checklist for Frontend  
            - [ ] Código revisado  
            - [ ] Pruebas unitarias agregadas  
            - [ ] Documentación actualizada  
            - [ ] Aprobación de al menos un revisor  
            `;

            // Add checklist comment to the PR
            github.rest.issues.createComment({
              issue_number: pr.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: checklist
            }).then(response => {
              console.log("Checklist comment added successfully!");
            }).catch(error => {
              console.log("Error adding checklist comment:", error);
            });


